import{d as W,o as d,c,a,t as v,F as f,r as m,w as j,b as L,e as w,f as O,g as B,h as b,v as x,i as V,j as F}from"./index-B3XBxDDj.js";const P={class:"lecture_main"},R={class:"lecture_main_time"},E={class:"lecture_main_name"},H={class:"lecture_info"},U=W({__name:"Lecture",props:{title:String,group:String,lecturer:String,room:String,start_time:String,end_time:String,date:String},setup(i){const n=i;let l=n.date?new Date(n.date):new Date;return l.getDate()<10?""+l.getDate().toString():l.getDate().toString(),l.getMonth()+1<10?""+(l.getMonth()+1).toString():(l.getMonth()+1).toString(),l.getFullYear(),(D,r)=>(d(),c(f,null,[a("div",P,[a("div",R,v(i.start_time)+"-"+v(i.end_time),1),a("div",E,v(i.title),1)]),a("div",H,[a("p",null,"Группа: "+v(i.group),1),a("p",null,"Преподаватель: "+v(i.lecturer),1),a("p",null,"Аудитория: "+v(i.room),1)])],64))}}),q={class:"lecture_day"},A={class:"lecture"},Y=W({__name:"LectureDay",props:{schedule:{},selected_date:{},name:{},type:{}},setup(i){const n=i,l=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],D=m(n.selected_date.slice(8,10)),r=m(n.selected_date.slice(5,7)),_=m([]),p=m([]);function $(){_.value=n.schedule.filter(o=>o.date===n.selected_date),p.value=_.value.filter(o=>n.type=="group"&&o.group==n.name||n.type=="room"&&o.room==n.name||n.type=="lecturer"&&o.lecturer==n.name)}return j(()=>n.schedule,$,{immediate:!0}),console.log("schedule = ",_.value),(o,k)=>(d(),c(f,null,[a("p",null,"Дата: "+v(D.value+"."+r.value+", "+l[new Date(o.selected_date).getDay()]),1),a("div",q,[(d(!0),c(f,null,L(p.value,u=>(d(),c("li",A,[w(U,{title:u.title,group:u.group,lecturer:u.lecturer,room:u.room,start_time:u.start_time,end_time:u.end_time,date:u.date},null,8,["title","group","lecturer","room","start_time","end_time","date"])]))),256))])],64))}}),z=a("button",{class:"back_btn"},"Назад",-1),G={class:"filter-options"},J={class:"results"},Q=W({__name:"ResultView",props:{selectedItem:{},itemType:{}},setup(i){function n(t){return Array.from(new Set(t))}const l=m([]),D=m([]);fetch("./src/schedule.json").then(t=>t.json()).then(t=>{l.value=t.schedule,D.value=n(t.schedule.map(e=>e.date))}).catch(t=>{console.error("Ошибка загрузки расписания:",t)});const r=m("thisWeek");function _(t){const e=new Date(t),g=e.getDay(),s=e.getDate()-g+(g==0?-6:1);return e.setDate(s),e.setHours(0,0,0,0),e}function p(t){const e=new Date(t);return e.setDate(e.getDate()+6),e.setHours(23,59,59,999),e}const o=_(new Date),k=p(o),u=new Date(o);u.setDate(u.getDate()+7);const N=p(u),h=new Date(o);h.setDate(h.getDate()-7);const T=p(h),y=m(o.toISOString().split("T")[0]),S=m(k.toISOString().split("T")[0]),C=O(()=>{let t,e;return r.value==="thisWeek"?(t=o,e=k):r.value==="nextWeek"?(t=u,e=N):r.value==="prevWeek"?(t=h,e=T):(t=new Date(y.value),e=new Date(S.value)),l.value.filter(g=>{const s=new Date(g.date);return s>=t&&s<=e})}),I=O(()=>n(C.value.map(t=>t.date)));return(t,e)=>{const g=F("RouterLink");return d(),c(f,null,[w(g,{to:"/"},{default:B(()=>[z]),_:1}),a("div",G,[a("button",{onClick:e[0]||(e[0]=s=>r.value="thisWeek")},"Эта неделя"),a("button",{onClick:e[1]||(e[1]=s=>r.value="nextWeek")},"Следующая неделя"),a("button",{onClick:e[2]||(e[2]=s=>r.value="prevWeek")},"Предыдущая неделя"),a("button",{onClick:e[3]||(e[3]=s=>r.value="custom")},"Период"),r.value==="custom"?b((d(),c("input",{key:0,type:"date","onUpdate:modelValue":e[4]||(e[4]=s=>y.value=s)},null,512)),[[x,y.value]]):V("",!0),r.value==="custom"?b((d(),c("input",{key:1,type:"date","onUpdate:modelValue":e[5]||(e[5]=s=>S.value=s)},null,512)),[[x,S.value]]):V("",!0)]),a("div",J,[(d(!0),c(f,null,L(I.value,s=>(d(),c("div",{key:s},[w(Y,{schedule:C.value.filter(M=>M.date===s),selected_date:s,name:t.selectedItem,type:t.itemType},null,8,["schedule","selected_date","name","type"])]))),128))])],64)}}});export{Q as default};
